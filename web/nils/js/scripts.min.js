$(document).ready(function(){var btn_toggle=document.getElementById('toggle'),audio=document.getElementsByTagName("audio"),tracks=document.getElementById('tracks').getElementsByTagName("a"),totalTracks=audio.length/2,hasPlayed=0,playing=0,degrees=0,track=1,t,steve=document.getElementById("steve"+track),nils=document.getElementById("nils"+track);$(window).load(function(){$('#art').css('opacity',1);});function setVol(){for(var i=0;i<audio.length;i++){audio[i].volume=0.707;} $('img[alt=sun]').css('opacity',0.5);$('#slider').val(50);} $("#tracks a").each(function(i){i++;var idee='t'+i;$(this).attr('id',idee).click(function(){toggle(i);});});function animate(){t=setTimeout(function(){degrees=degrees+0.35;$('img[alt=sun]').css({'transform':'rotate(-'+degrees+'deg)'});$('img[alt=moon]').css({'transform':'rotate('+degrees+'deg)'});if(playing===1){animate();}},50);} function toggle(what){if(playing===1){steve.pause();nils.pause();if(track!=what){playing=0;}} $('.active b, .active i').css('opacity',1);$('.active').removeClass('active');track=what;var active='a[id="t'+track+'"]';$(active).addClass('active');steve=document.getElementById("steve"+track);nils=document.getElementById("nils"+track);if(playing===0){setVol();clearTimeout(t);animate();steve.play();nils.play();playing=1;btn_toggle.innerHTML="<b>&#9616;&#9616;</b>";}else{steve.pause();nils.pause();playing=0;btn_toggle.innerHTML="<i>&#9654;<i>";} hasPlayed=1;} $(document).keypress(function(e){if(e.which===32){toggle(track);$('#toggle').focus();return false;}});function goto(where){var go=where+track;if(go<1){go=totalTracks;}else if(go>totalTracks||hasPlayed===0){go=1;} toggle(go);} $('#toggle').click(function(){toggle(track);});$('#prev').click(function(){goto(-1);});$('#next').click(function(){goto(1);});$('#slider').on("input change",function(){var r_linear=$('#slider').val()/100,l_linear=$('#slider').val()*-1/100+1,r_constant=Math.cos(0.5*Math.PI*r_linear),l_constant=Math.sin(0.5*Math.PI*r_linear);$('img[alt=sun]').css('opacity',r_linear);$('.active b').css('opacity',l_linear*2);$('.active i').css('opacity',r_linear*2);nils.volume=r_constant;steve.volume=l_constant;});});